import{_ as y,a0 as E,c as g,e as S,N as r,P as M,M as w,r as C,o as l,a as u,d as t,f as I,F as D,q as L,k,t as B,b,n as U,I as N,p as O,g as T}from"./index-709aae4c.js";const V={setup(){const{buildCourseMap:n,saveCourseOrder:s}=E();let p=g(()=>r.builtCourse);return S(()=>{n()}),{BUILT_COURSE:p,editing:g(()=>r.editing),buildCourse(){n()},handleDroppedChapter(e,o,i){if(console.log("dropping",{placement:e,i:o,chapter:i}),i.chapterId)return;o=e=="before"?o:o+1;const c=r.builtCourse.chapters.findIndex(_=>_.id==i.id);o<c?(r.builtCourse.chapters.splice(c,1),r.builtCourse.chapters.splice(o,0,i)):(r.builtCourse.chapters.splice(o,0,i),r.builtCourse.chapters.splice(c,1))},async createChapter(e){const o=await M.prompt("Chapter Title");if(!o)return;const i=await w.createChapter({title:o,courseId:p.value.id});r.builtCourse.chapters.splice(e,0,i),s(r.builtCourse)},saveChanges(){s(r.builtCourse)},clearEditing(){r.editing=null}}}},d=n=>(O("data-v-74d16ca7"),n=n(),T(),n),R={class:"curriculum-manager bg-page drop-2 p-4 rounded"},F={class:"fs-3"},P=d(()=>t("span",null,"Curriculum Manager",-1)),q=d(()=>t("i",{class:"mdi mdi-refresh"},null,-1)),z=[q],A=d(()=>t("i",{class:"mdi mdi-cloud-upload"},null,-1)),j={key:0,class:"my-3"},G=d(()=>t("div",{class:"fs-5"},"Chapters",-1)),H={class:"mt-2"},J={class:"chapter rounded border p-3 mt-2"},K=["onClick"],Q=d(()=>t("div",{class:"text-white"},[I(" Insert Chapter "),t("i",{class:"mdi mdi-arrow-down-right"})],-1)),W=[Q],X=d(()=>t("hr",null,null,-1)),Y={class:"offcanvas-header"},Z={class:"offcanvas-title",id:"curriculum-editor-Label"},$={key:0,class:"offcanvas-body"};function ee(n,s,p,e,o,i){var m,f;const c=C("ChapterEditor"),_=C("Droppable"),x=C("CurriculumEditor");return l(),u("div",R,[t("div",F,[P,t("button",{class:"btn",onClick:s[0]||(s[0]=(...a)=>e.buildCourse&&e.buildCourse(...a)),title:"refresh"},z),t("button",{class:"btn",onClick:s[1]||(s[1]=(...a)=>e.saveChanges&&e.saveChanges(...a)),title:"Save Order Changes"},[A,I(" Save Changes ")])]),e.BUILT_COURSE?(l(),u("section",j,[G,t("div",H,[t("button",{class:"btn p-0 clickable-inform border-inform lift-4 w-100",onClick:s[2]||(s[2]=a=>e.createChapter(0))}," Add Chapter "),(l(!0),u(D,null,L(e.BUILT_COURSE.chapters,(a,h)=>(l(),u("div",{key:a.id},[t("div",J,[b(c,{chapter:a,index:h},null,8,["chapter","index"])]),b(_,{dropMessage:"Move Chapter",onDropped:v=>e.handleDroppedChapter("after",h,v)},{default:N(()=>[t("button",{class:"btn hover-bg-inform-10 border-inform drop-4 ms-1 py-0 on-hover insert-chapter",onClick:v=>e.createChapter(h+1)},W,8,K)]),_:2},1032,["onDropped"])]))),128))]),X])):k("",!0),t("div",{class:U(["offcanvas offcanvas-start",{isLesson:(m=e.editing)==null?void 0:m.chapterId}]),"data-bs-backdrop":"static",tabindex:"-1",id:"curriculum-editor","aria-labelledby":"curriculum-editor-Label"},[t("div",Y,[t("h5",Z,"Editing "+B((f=e.editing)==null?void 0:f.title),1),t("button",{type:"button",class:"btn-close",onClick:s[3]||(s[3]=(...a)=>e.clearEditing&&e.clearEditing(...a)),"data-bs-dismiss":"offcanvas","aria-label":"Close"})]),e.editing?(l(),u("div",$,[b(x,{editing:e.editing},null,8,["editing"])])):k("",!0)],2)])}const se=y(V,[["render",ee],["__scopeId","data-v-74d16ca7"]]);export{se as default};
