import{_ as w,c as v,l as k,r as S,a as u,d as e,R as A,D as d,E as r,F as E,e as I,o as c,t as i,q as M,b as T,p as V,i as D,g as m,O as b,K as C,P as p}from"./index-85e8c21a.js";const l=a=>(V("data-v-84f32b42"),a=a(),D(),a),$={class:"course-settings rounded"},B=l(()=>e("div",{class:"fs-3"},"Course Coupons",-1)),L={class:"border-top"},R=l(()=>e("div",{class:"mb-3"},[e("span",null,"Enrollment Codes")],-1)),N={class:"mb-3 gap-3"},j={class:"gap-2 align-items-center d-flex flex-wrap"},F=l(()=>e("label",null,[e("strong",null,"Code"),m(),e("small",null,"(default: Generated if blank)")],-1)),O=l(()=>e("label",null,[e("strong",null,"Max Uses"),m(),e("small",null,"(default: Unlimited)")],-1)),P=l(()=>e("label",null,[e("strong",null,"Expires"),m(),e("small",null,"(default: 12-12-2040)")],-1)),q=l(()=>e("div",null,[e("div",null,[e("label")]),e("button",{class:"btn btn-outline-inform",type:"submit"},"Submit")],-1)),z={class:"table table-sm"},G=l(()=>e("thead",null,[e("tr",null,[e("th",null,"Code"),e("th",null,"Max Uses"),e("th",null,"Times Used"),e("th",null,"Expires"),e("th",null,"Created"),e("th")])],-1)),K=["onClick"],H={class:"clickable-inform"},J=["onClick"],Q=l(()=>e("i",{class:"mdi mdi-trash-can-outline"},null,-1)),W=[Q],X={__name:"CourseCoupons",setup(a){const _=v(()=>b.course),f=v(()=>b.coupons),s=k({code:"",expiresAt:"2040-12-12",maxUses:0,courseId:""});async function x(){var n;try{s.value.code=s.value.code||window.URL.createObjectURL(new Blob([])).split("-").pop(),s.value.code=((n=s.value.code)==null?void 0:n.toUpperCase().split(" ").join("-"))||"",s.value.courseId=_.value.id,await C.createCoupon(s.value),s.value={code:"",expiresAt:"2040-12-12",maxUses:0,courseId:""}}catch(o){p.error(o)}}async function h(n){await p.confirm("Remove Coupon Code?")&&await C.deleteCoupon(n)}function g(n){const o=`https://training.codeworksacademy.com/course/${_.value.slug}/enroll?code=${n}`;navigator.clipboard.writeText(o),p.toast("Coupon Url Copied")}return(n,o)=>{const U=S("TimeAgo");return c(),u("div",$,[B,e("div",L,[R,e("div",N,[e("form",{onSubmit:o[3]||(o[3]=A(t=>x(),["prevent"]))},[e("div",j,[e("div",null,[F,d(e("input",{class:"form-control",type:"string","onUpdate:modelValue":o[0]||(o[0]=t=>s.value.code=t)},null,512),[[r,s.value.code,void 0,{trim:!0}]])]),e("div",null,[O,d(e("input",{class:"form-control",type:"number",min:"0",max:"9999","onUpdate:modelValue":o[1]||(o[1]=t=>s.value.maxUses=t)},null,512),[[r,s.value.maxUses]])]),e("div",null,[P,d(e("input",{class:"form-control",type:"date","onUpdate:modelValue":o[2]||(o[2]=t=>s.value.expiresAt=t)},null,512),[[r,s.value.expiresAt]])]),q])],32)]),e("table",z,[G,e("tbody",null,[(c(!0),u(E,null,I(f.value,t=>(c(),u("tr",{key:t.id},[e("td",null,[e("div",{onClick:y=>g(t.code)},[e("span",H,i(t.code),1)],8,K)]),e("td",null,i(t.maxUses||"Unlimited"),1),e("td",null,i(t.timesUsed),1),e("td",null,[e("div",{class:M({"text-danger":t.isExpired})},i(new Date(t.expiresAt).toLocaleDateString()),3)]),e("td",null,[T(U,{date:t.createdAt},null,8,["date"])]),e("td",null,[e("button",{class:"btn btn-icon btn-xs",onClick:y=>h(t),title:"delete coupon"},W,8,J)])]))),128))])])])])}}},Z=w(X,[["__scopeId","data-v-84f32b42"]]);export{Z as default};
