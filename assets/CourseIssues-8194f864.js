import{_ as y,c as k,P as a,K as h,r as m,Q as I,o as c,a as r,d as e,t as _,D as x,F as C,q as S,O as V,n as M,f as p,b as v,k as u,p as D,g as E}from"./index-818844cf.js";const T={setup(){async function n(t){try{await h.editIssue(t),a.toast("Issue "+t.state,"success")}catch(o){a.error(o)}}return{issues:k(()=>V.issues.sort((t,o)=>t.state=="resolved"?1:-1)),saveIssue:n,async removeIssue(t){try{if(!await a.confirm(t.state!="resolved"?"Is this a non issue and will not be addressed?":"Remove Issue"))return;await h.removeIssue(t)}catch(o){a.error(o)}},async acknowledgeIssue(t){try{const o=await a.prompt("What are you plans for fixing this issue?",{input:"textarea"});if(!o)return;t.response=`## Issue Acknowledged

`+o,t.state="acknowledged",await n(t)}catch(o){a.error(o)}},async resolveIssue(t){try{const o=await a.prompt("How did you resolve this issue?",{input:"textarea"})||"";if(!o)return;t.response+=`

---

## Issue Resolved

`+o,t.state="resolved",await n(t)}catch(o){a.error(o)}}}}},d=n=>(D("data-v-0fdb4be1"),n=n(),E(),n),A={class:"course-issues bg-page drop-2 p-4 rounded"},N={class:"fs-3 d-flex justify-content-between"},R={class:"mdi mdi-information-outline text-muted",title:"Issues are reported by students in your course"},B={class:"issues"},P={class:"d-flex align-items-center gap-3"},j=["onClick"],z=d(()=>e("i",{class:"mdi mdi-delete-forever"},null,-1)),F=[z],L=["src","title"],O={class:"mb-0 d-flex flex-column"},U={class:"text-muted"},q={class:"bold"},H=["data-bs-target"],K=d(()=>e("button",{class:"btn p-0 text-muted selectable"},[p("... more "),e("i",{class:"mdi mdi-chevron-down"})],-1)),Q={class:"d-flex justify-content-end align-items-center flex-grow-1"},W={key:0},$=["onClick"],G=d(()=>e("i",{class:"mdi mdi-reply"},null,-1)),J=["onClick"],X=d(()=>e("i",{class:"mdi mdi-source-merge"},null,-1)),Y={key:0,class:"flex-grow-1 text-end"},Z=d(()=>e("p",{class:"bold mb-0"},[e("small",{class:"badge no-select"},"RESOLVED")],-1)),ee=[Z],se=["id"],te={class:"p-3 bg-page drop-4 rounded my-1"},oe={key:0,class:"p-3 bg-page drop-4 my-1 rounded"},ne=d(()=>e("p",{class:"bold"},[e("small",null,"Response")],-1));function ae(n,t,o,l,le,ce){const b=m("TimeAgo"),g=m("Markdown"),f=m("MarkdownEditor"),w=I("tooltip");return c(),r("div",A,[e("div",N,[e("span",null,_(l.issues.length)+" Course "+_(l.issues.length==1?"Issue":"Issues"),1),x(e("i",R,null,512),[[w]])]),e("div",B,[(c(!0),r(C,null,S(l.issues,s=>(c(),r("div",{class:M(["issue mb-3",s.state]),key:s.id},[e("div",P,[e("div",null,[e("button",{class:"btn clickable-hazard",title:"This is a non issue and will not be resolved!",onClick:i=>l.removeIssue(s)},F,8,j),e("img",{src:s.account.picture,title:s.account.name,class:"profile-picture rounded"},null,8,L)]),e("p",O,[e("sup",U,[p(_(s.account.name)+" ",1),v(b,{date:s.createdAt},null,8,["date"])]),e("small",null,[e("span",q,_(s.content.title),1)])]),e("p",{class:"mb-0 clip-text selectable no-select","data-bs-toggle":"collapse","data-bs-target":"#"+s.id},[e("span",null,_(s.report.slice(0,50)),1),K],8,H),e("div",Q,[s.state!="resolved"?(c(),r("span",W,[s.state!="acknowledged"?(c(),r("button",{key:0,class:"btn clickable-info",title:"Say thanks, and let the students know a fix is on the way",onClick:i=>l.acknowledgeIssue(s),"data-bs-toggle":"modal","data-bs-target":"#issue-modal"},[G,p(" respond ")],8,$)):u("",!0),e("button",{class:"btn clickable-warn",title:"This problem can be closed",onClick:i=>l.resolveIssue(s)},[X,p(" resolve ")],8,J)])):u("",!0)]),s.state=="resolved"?(c(),r("div",Y,ee)):u("",!0)]),e("div",{class:"collapse",id:s.id},[e("div",te,[v(g,{value:s.report},null,8,["value"])]),s.response?(c(),r("div",oe,[ne,v(f,{startPreview:!0,modelValue:s.response,"onUpdate:modelValue":i=>s.response=i,onSave:i=>l.saveIssue(s)},null,8,["modelValue","onUpdate:modelValue","onSave"])])):u("",!0)],8,se)],2))),128))])])}const de=y(T,[["render",ae],["__scopeId","data-v-0fdb4be1"]]);export{de as default};
