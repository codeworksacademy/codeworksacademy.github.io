import{_ as w,c as v,h as k,r as S,o as u,a as d,d as e,Q as A,C as r,D as c,F as I,q as E,N as b,t as i,n as M,b as T,p as V,g as D,f as m,J as C,P as p}from"./index-758fcfc6.js";const l=a=>(V("data-v-84623b73"),a=a(),D(),a),$={class:"course-settings bg-page drop-2 p-4 rounded"},B=l(()=>e("div",{class:"fs-3"},"Course Coupons",-1)),L={class:"border-top"},N=l(()=>e("div",{class:"mb-3"},[e("span",null,"Enrollment Codes")],-1)),R={class:"mb-3 gap-3"},j={class:"gap-2 align-items-center d-flex flex-wrap"},F=l(()=>e("label",null,[e("strong",null,"Code"),m(),e("small",null,"(default: Generated if blank)")],-1)),P=l(()=>e("label",null,[e("strong",null,"Max Uses"),m(),e("small",null,"(default: Unlimited)")],-1)),q=l(()=>e("label",null,[e("strong",null,"Expires"),m(),e("small",null,"(default: 12-12-2040)")],-1)),z=l(()=>e("div",null,[e("div",null,[e("label")]),e("button",{class:"btn btn-outline-inform",type:"submit"},"Submit")],-1)),G={class:"table table-sm"},J=l(()=>e("thead",null,[e("tr",null,[e("th",null,"Code"),e("th",null,"Max Uses"),e("th",null,"Times Used"),e("th",null,"Expires"),e("th",null,"Created"),e("th")])],-1)),O=["onClick"],Q={class:"clickable-inform"},H=["onClick"],K=l(()=>e("i",{class:"mdi mdi-trash-can-outline"},null,-1)),W=[K],X={__name:"CourseCoupons",setup(a){const _=v(()=>b.course),x=v(()=>b.coupons),s=k({code:"",expiresAt:"2040-12-12",maxUses:0,courseId:""});async function f(){var n;try{s.value.code=s.value.code||window.URL.createObjectURL(new Blob([])).split("-").pop(),s.value.code=((n=s.value.code)==null?void 0:n.toUpperCase().split(" ").join("-"))||"",s.value.courseId=_.value.id,await C.createCoupon(s.value),s.value={code:"",expiresAt:"2040-12-12",maxUses:0,courseId:""}}catch(o){p.error(o)}}async function h(n){await p.confirm("Remove Coupon Code?")&&await C.deleteCoupon(n)}function g(n){const o=`https://training.codeworksacademy.com/course/${_.value.slug}/enroll?code=${n}`;navigator.clipboard.writeText(o),p.toast("Coupon Url Copied")}return(n,o)=>{const U=S("TimeAgo");return u(),d("div",$,[B,e("div",L,[N,e("div",R,[e("form",{onSubmit:o[3]||(o[3]=A(t=>f(),["prevent"]))},[e("div",j,[e("div",null,[F,r(e("input",{class:"form-control",type:"string","onUpdate:modelValue":o[0]||(o[0]=t=>s.value.code=t)},null,512),[[c,s.value.code,void 0,{trim:!0}]])]),e("div",null,[P,r(e("input",{class:"form-control",type:"number",min:"0",max:"9999","onUpdate:modelValue":o[1]||(o[1]=t=>s.value.maxUses=t)},null,512),[[c,s.value.maxUses]])]),e("div",null,[q,r(e("input",{class:"form-control",type:"date","onUpdate:modelValue":o[2]||(o[2]=t=>s.value.expiresAt=t)},null,512),[[c,s.value.expiresAt]])]),z])],32)]),e("table",G,[J,e("tbody",null,[(u(!0),d(I,null,E(x.value,t=>(u(),d("tr",{key:t.id},[e("td",null,[e("div",{onClick:y=>g(t.code)},[e("span",Q,i(t.code),1)],8,O)]),e("td",null,i(t.maxUses||"Unlimited"),1),e("td",null,i(t.timesUsed),1),e("td",null,[e("div",{class:M({"text-danger":t.isExpired})},i(new Date(t.expiresAt).toLocaleDateString()),3)]),e("td",null,[T(U,{date:t.createdAt},null,8,["date"])]),e("td",null,[e("button",{class:"btn btn-icon btn-xs",onClick:y=>h(t),title:"delete coupon"},W,8,H)])]))),128))])])])])}}},Z=w(X,[["__scopeId","data-v-84623b73"]]);export{Z as default};
